{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      message: \"HI\",\n      recipes: [],\n      selectedCategories: [],\n      categories: [],\n      showCategories: false\n    };\n  },\n\n  mounted() {\n    this.getRecipes();\n    this.getCategories();\n  },\n\n  watch: {\n    selectedCategories() {\n      if (this.selectedCategories.length > 0) {\n        this.getFilteredRecipes();\n      } else {\n        this.getRecipes();\n      }\n    }\n\n  },\n  methods: {\n    toggleShowCategories() {\n      this.showCategories = !this.showCategories;\n    },\n\n    updateSelectedCategories(item) {\n      if (!this.selectedCategories.includes(item.id)) {\n        this.selectedCategories = [];\n        this.selectedCategories.push(item.id);\n      } else {\n        let x = this.selectedCategories.indexOf(item.id);\n        this.selectedCategories.splice(x, 1);\n      }\n    },\n\n    getCategories() {\n      axios.get(\"https://59esd0ee.directus.app/items/categories?fields=*.*.*\").then(response => {\n        console.log(\"success\", response.data.data);\n        this.categories = response.data.data;\n      }).catch(error => {\n        console.log(\"error\", error);\n      });\n    },\n\n    getFilteredRecipes() {\n      console.log(\"getting filtered\");\n      var filter_string = \"\";\n\n      for (let i = 0; i < this.selectedCategories.length; i++) {\n        filter_string += `&filter[categories_id][_in]=${this.selectedCategories[i]}`;\n      }\n\n      console.log(filter_string);\n      axios.get(`https://59esd0ee.directus.app/items/categories_recipes?${filter_string}`).then(response => {\n        console.log(response.data.data, \"response\");\n        this.recipes = [];\n\n        for (let i = 0; i < response.data.data.length; i++) {\n          // console.log(response.data.data[i]);\n          if (response.data.data[i].recipes_id !== null) {\n            console.log(response.data.data[i].posts_id, \"post\");\n            this.recipes.push({ ...response.data.data[i].recipes_id,\n              pic: response.data.data[i].recipes_id.pic?.id ? response.data.data[i].recipes_id.pic?.id : \"\"\n            });\n          }\n        }\n      }).catch(error => {\n        console.log(\"error\", error);\n      });\n    },\n\n    recipeDetails(item) {\n      this.$router.push(`recipe/${item.id}`);\n    },\n\n    getRecipes() {\n      axios.get(\"https://59esd0ee.directus.app/items/recipes?fields=*.*.*\").then(response => {\n        console.log(\"success\", response.data.data);\n        this.recipes = response.data.data;\n      }).catch(error => {\n        console.log(\"error\", error);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;EACAA;IACA;MACAC,aADA;MAEAC,WAFA;MAGAC,sBAHA;MAIAC,cAJA;MAKAC;IALA;EAOA,CATA;;EAUAC;IACA;IACA;EACA,CAbA;;EAcAC;IACAJ;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EAPA,CAdA;EAuBAK;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;IACA,CAZA;;IAaAC;MACAC,MACAC,GADA,CACA,6DADA,EAEAC,IAFA,CAEAC;QACAC;QACA;MACA,CALA,EAMAC,KANA,CAMAC;QACAF;MACA,CARA;IASA,CAvBA;;IAwBAG;MACAH;MACA;;MACA;QACAI;MACA;;MACAJ;MACAJ,MACAC,GADA,CAEA,yEAFA,EAIAC,IAJA,CAIAC;QACAC;QACA;;QACA;UACA;UACA;YACAA;YACA,oBACA,mCADA;cAEAK,gDACAN,wCADA,GAEA;YAJA;UAMA;QACA;MACA,CAnBA,EAoBAE,KApBA,CAoBAC;QACAF;MACA,CAtBA;IAuBA,CAtDA;;IAuDAM;MACA;IACA,CAzDA;;IA0DAC;MACAX,MACAC,GADA,CACA,0DADA,EAEAC,IAFA,CAEAC;QACAC;QACA;MACA,CALA,EAMAC,KANA,CAMAC;QACAF;MACA,CARA;IASA;;EApEA;AAvBA","names":["data","message","recipes","selectedCategories","categories","showCategories","mounted","watch","methods","toggleShowCategories","updateSelectedCategories","getCategories","axios","get","then","response","console","catch","error","getFilteredRecipes","filter_string","pic","recipeDetails","getRecipes"],"sourceRoot":"src/views","sources":["RecipeListView.vue"],"sourcesContent":["<template>\n  <div id=\"rl-main\">\n    <div class=\"text-center\">\n      <span class=\"c-btn\" @click=\"toggleShowCategories\">Categories</span>\n      <div v-if=\"showCategories\">\n        <!-- {{ selectedCategories }} -->\n        <span v-for=\"(category, index) in categories\" :key=\"index\">\n          <v-chip\n            class=\"ma-3\"\n            :dark=\"selectedCategories.includes(category.id)\"\n            :color=\"\n              selectedCategories.includes(category.id) ? 'black' : 'white'\n            \"\n            @click=\"updateSelectedCategories(category)\"\n            >{{ category.name }}\n          </v-chip>\n        </span>\n      </div>\n    </div>\n    <h1 class=\"text-center abril\">recipe list</h1>\n    <div id=\"r-wrapper\" class=\"ma-3\">\n      <div\n        @click=\"recipeDetails(item)\"\n        v-for=\"(item, index) in recipes\"\n        :key=\"index\"\n        class=\"elevation-3 recipe\"\n      >\n        <img\n          v-if=\"item.pic\"\n          :src=\"`https://59esd0ee.directus.app/assets/${item.pic}`\"\n          alt=\"featured image\"\n        />\n        <img\n          v-else\n          src=\"https://www.thetipsymacaron.com/wp-content/uploads/cotton-candy-macarons.jpg\n            \"\n          alt=\"featured image\"\n        />\n        <span class=\"text-center recipe-title\">\n          <strong>{{ item.name }}</strong\n          ><br />\n          <i v-for=\"(cat, i) in item.categories\" :key=\"i\"\n            >{{ cat.categories_id.name\n            }}{{ i === item.categories.length ? \"\" : \" | \" }}\n            {{ item.categories.length }}\n          </i>\n        </span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      message: \"HI\",\n      recipes: [],\n      selectedCategories: [],\n      categories: [],\n      showCategories: false,\n    };\n  },\n  mounted() {\n    this.getRecipes();\n    this.getCategories();\n  },\n  watch: {\n    selectedCategories() {\n      if (this.selectedCategories.length > 0) {\n        this.getFilteredRecipes();\n      } else {\n        this.getRecipes();\n      }\n    },\n  },\n  methods: {\n    toggleShowCategories() {\n      this.showCategories = !this.showCategories;\n    },\n    updateSelectedCategories(item) {\n      if (!this.selectedCategories.includes(item.id)) {\n        this.selectedCategories = [];\n        this.selectedCategories.push(item.id);\n      } else {\n        let x = this.selectedCategories.indexOf(item.id);\n        this.selectedCategories.splice(x, 1);\n      }\n    },\n    getCategories() {\n      axios\n        .get(\"https://59esd0ee.directus.app/items/categories?fields=*.*.*\")\n        .then((response) => {\n          console.log(\"success\", response.data.data);\n          this.categories = response.data.data;\n        })\n        .catch((error) => {\n          console.log(\"error\", error);\n        });\n    },\n    getFilteredRecipes() {\n      console.log(\"getting filtered\");\n      var filter_string = \"\";\n      for (let i = 0; i < this.selectedCategories.length; i++) {\n        filter_string += `&filter[categories_id][_in]=${this.selectedCategories[i]}`;\n      }\n      console.log(filter_string);\n      axios\n        .get(\n          `https://59esd0ee.directus.app/items/categories_recipes?${filter_string}`\n        )\n        .then((response) => {\n          console.log(response.data.data, \"response\");\n          this.recipes = [];\n          for (let i = 0; i < response.data.data.length; i++) {\n            // console.log(response.data.data[i]);\n            if (response.data.data[i].recipes_id !== null) {\n              console.log(response.data.data[i].posts_id, \"post\");\n              this.recipes.push({\n                ...response.data.data[i].recipes_id,\n                pic: response.data.data[i].recipes_id.pic?.id\n                  ? response.data.data[i].recipes_id.pic?.id\n                  : \"\",\n              });\n            }\n          }\n        })\n        .catch((error) => {\n          console.log(\"error\", error);\n        });\n    },\n    recipeDetails(item) {\n      this.$router.push(`recipe/${item.id}`);\n    },\n    getRecipes() {\n      axios\n        .get(\"https://59esd0ee.directus.app/items/recipes?fields=*.*.*\")\n        .then((response) => {\n          console.log(\"success\", response.data.data);\n          this.recipes = response.data.data;\n        })\n        .catch((error) => {\n          console.log(\"error\", error);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.recipe {\n  background-color: white;\n  border-radius: 10px;\n  transition: 0.3s;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: 30px 10px;\n}\n.recipe img {\n  border-radius: 10px 10px 0 0;\n}\n\n.recipe:hover {\n  cursor: pointer;\n  transition: 0.3s;\n}\n.recipe-title {\n  padding: 10px;\n}\n\n#rl-main {\n  background-color: #f6e4d1;\n  min-height: calc(100vh - 56px);\n  padding: 20px 0;\n}\n\n@media (min-width: 795px) {\n  .recipe {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    transition: 0.3s;\n    position: relative;\n    bottom: 0;\n  }\n  .recipe:hover {\n    bottom: 20px;\n    transition: 0.3s;\n  }\n  .recipe img {\n    max-height: 400px;\n  }\n\n  #r-wrapper {\n    display: flex;\n    justify-content: space-evenly;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}